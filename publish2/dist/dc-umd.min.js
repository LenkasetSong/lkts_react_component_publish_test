!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("antd"),require("prop-types")):"function"==typeof define&&define.amd?define(["exports","react","antd","prop-types"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).geneUI={},e.React,e.antd,e.PropTypes)}(this,(function(e,t,a,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var l=r(t),i=r(n);function u(e,t){void 0===t&&(t={});var a=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===a&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}u(".btn-style{border-color:#00f;margin:10px}");var o="AnotherButton-module_btn__3h7Ml";function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function m(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}u(".AnotherButton-module_btn__3h7Ml{width:450px;height:30px;margin:10px;color:red}");var c=0,f=1,h=2,y=3,g=4,v=5;u("");var C=function(e){function t(t){var a;return d(p(a=e.call(this,t)||this),"Id",Math.trunc(16777216*Math.random()).toString()),a}m(t,e);var n=t.prototype;return n.textChanged=function(e){var t=this.props;(0,t.OnTextChanged)(t.name,e.target.value)},n.render=function(){var e=this.props,t=e.displayName,n=e.description,r=e.text;return l.default.createElement(a.Form.Item,{label:l.default.createElement(a.Tooltip,{title:n},""+t)},l.default.createElement(a.Input,{id:this.Id,defaultValue:r,placeholder:"请输入字符串...",onChange:this.textChanged.bind(this)}))},t}(t.Component);C.propTypes={name:i.default.string,displayName:i.default.string,description:i.default.string,text:i.default.string,OnTextChanged:i.default.func};u("");var E=function(e){function t(t){var a;return d(p(a=e.call(this,t)||this),"Id",Math.trunc(16777216*Math.random()).toString()),d(p(a),"limitDecimals",(function(e){var t=/^(-)*(\d+)\.(\d\d).*$/;return"string"==typeof e?isNaN(Number(e))?"":e.replace(t,"$1$2.$3"):"number"==typeof e?isNaN(e)?"":String(e).replace(t,"$1$2.$3"):""})),a.state={currentValue:t.value},a}m(t,e);var n=t.prototype;return n.valueChanged=function(e){var t=this.props,a=t.max,n=t.min,r=t.name,l=t.OnValueChanged;/^[0-9]+.?[0-9]*/.test(e)&&(e<=a||e>=n)&&(this.setState({currentValue:e}),null==l||l(r,e))},n.render=function(){var e=this.props,t=e.max,n=e.min,r=e.displayName,i=e.description,u=e.isInteger,o=e.unit,d=this.state.currentValue;return l.default.createElement(a.Form.Item,{label:l.default.createElement(a.Tooltip,{title:i},""+r)},l.default.createElement(a.Form.Item,{noStyle:!0,rules:[{required:!0,message:"该属性不能为空"}]},l.default.createElement(a.InputNumber,{min:n||0,max:t||Number.MAX_SAFE_INTEGER,value:d,step:u?1:.01,onChange:this.valueChanged.bind(this)})),l.default.createElement(a.Space,{style:{marginLeft:10},size:"large"},l.default.createElement("div",null,""+(void 0!==o?o:"")),l.default.createElement("div",{style:{color:"orangered"}},n&&t?n+"~"+t:"",u?"整数":"小数")))},t}(t.Component);E.propTypes={name:i.default.string,displayName:i.default.string,description:i.default.string,value:i.default.number,min:i.default.number,max:i.default.number,unit:i.default.string,isInteger:i.default.bool,OnValueChanged:i.default.func};var b=a.Radio.Button,S=a.Radio.Group,O=function(e){function t(t){var a;return d(p(a=e.call(this,t)||this),"Id",Math.trunc(16777216*Math.random()).toString()),a}m(t,e);var n=t.prototype;return n.selectOptionChanged=function(e){var t=this.props;(0,t.OnSelectionChanged)(t.name,e)},n.selectRadioChanged=function(e){var t=this.props;(0,t.OnSelectionChanged)(t.name,e.target.value)},n.renderOptions=function(){var e=this.props,t=e.items,n=e.displayStrs;return t.map((function(e,t){return l.default.createElement(a.Select.Option,{key:t,value:e},n[t])}))},n.renderGroups=function(){var e=this.props,t=e.items,a=e.displayStrs;return t.map((function(e,t){return l.default.createElement(b,{key:t,value:e},a[t])}))},n.render=function(){var e=this.props,t=e.description,n=e.items,r=e.displayName,i=e.selectedItem;return l.default.createElement(a.Form.Item,{label:l.default.createElement(a.Tooltip,{title:t},""+r)},n.length<=3?l.default.createElement(S,{key:this.Id,defaultValue:i,onChange:this.selectRadioChanged.bind(this)},this.renderGroups()):l.default.createElement(a.Select,{key:this.Id,defaultValue:i,onChange:this.selectOptionChanged.bind(this)},this.renderOptions()))},t}(t.Component);O.propTypes={name:i.default.string,displayName:i.default.string,description:i.default.string,selectedItem:i.default.any,displayStrs:i.default.array,items:i.default.array,OnSelectionChanged:i.default.func};var x=function(e){function t(t){var a;d(p(a=e.call(this,t)||this),"Id",Math.trunc(16777216*Math.random()).toString());var n=a.props.bool;return a.state={currentBool:n},a}m(t,e);var n=t.prototype;return n.boolChanged=function(e){var t=this.props;(0,t.OnBoolChanged)(t.name,e),this.setState({currentBool:e})},n.render=function(){var e=this.props,t=e.displayName,n=e.description,r=e.displayStrs,i=e.items,u=this.state.currentBool;return l.default.createElement(a.Form.Item,{label:l.default.createElement(a.Tooltip,{title:n},""+t)},l.default.createElement(a.Form.Item,{noStyle:!0,rules:[{required:!0,message:"该属性不能为空"}]},l.default.createElement(a.Switch,{checked:u,onChange:this.boolChanged.bind(this)})),l.default.createElement(a.Tooltip,{title:"功能开关"},l.default.createElement("a",{href:"##",style:{margin:"0px 20px"}},r[i.indexOf(u)])))},t}(t.Component);x.propTypes={name:i.default.string,displayName:i.default.string,description:i.default.string,bool:i.default.bool,displayStrs:i.default.array,items:i.default.array,OnBoolChanged:i.default.func};u(".normal-button{border:0;background:transparent;margin-right:10px}.normal-button :hover{color:#3200e9}.normal-button :active{color:rgba(255,0,179,.61)}");var N=function(e){function t(t){var a;return d(p(a=e.call(this,t)||this),"Id",Math.trunc(16777216*Math.random()).toString()),d(p(a),"itemsCache",[]),d(p(a),"template",[]),d(p(a),"textChanged",(function(e,t,n,r){var l=r.target.value;a.itemsCache[e][""+n]=l})),d(p(a),"valueChanged",(function(e,t,n,r){/^[0-9]+.?[0-9]*/.test(r)&&(a.itemsCache[e][""+n]=r)})),d(p(a),"selectionChanged",(function(e,t,n,r){a.itemsCache[e][""+n]=r})),d(p(a),"deleteClick",(function(e){if(a.itemsCache.length>0){var t=a.state.itemstag;a.itemsCache.splice(e,1),a.setState({itemstag:t+1})}})),d(p(a),"addClick",(function(){var e=a.state.itemstag,t=a.props.items;if(t&&t.length>0)a.itemsCache.push(JSON.parse(JSON.stringify(t[0])));else{var n={};a.template.forEach((function(e){n[e.name]=e.default})),console.log(n),a.itemsCache.push(n)}a.setState({itemstag:e+1})})),d(p(a),"saveClick",(function(){var e=a.props,t=e.name;(0,e.OnListChanged)(t,a.itemsCache)})),a.state={itemstag:0},a.template=t.template,a.itemsCache=[].concat(t.items),a}m(t,e);var n=t.prototype;return n.renderList=function(e,t){var n=this;return this.template.map((function(r,i){var u=Math.trunc(16777216*Math.random()).toString(),o=c;switch(null===r.template||0===r.template.length?null!==r.values&&r.values.length>0?(o=y,5!==r.type&&"bool"!==r.type||(o=g)):(1!==r.type&&2!==r.type&&"float"!==r.type&&"double"!==r.type||(o=h),3!==r.type&&4!==r.type&&"int"!==r.type||(o=f)):o=v,o){case c:return l.default.createElement("tr",{key:u},l.default.createElement("td",{style:{textAlign:"right"}},r.displayName+":"),l.default.createElement("td",{colSpan:2,style:{padding:3}},l.default.createElement(a.Input,{defaultValue:e[""+r.name],placeholder:"请输入字符串...",onChange:n.textChanged.bind(n,t,i,r.name)})));case h:return l.default.createElement("tr",{key:u},l.default.createElement("td",{style:{textAlign:"right"}},r.displayName+":"),l.default.createElement("td",{style:{padding:3}},l.default.createElement(a.InputNumber,{style:{width:"90%"},min:r.minimum,max:r.maximum,defaultValue:e[""+r.name],step:.01,onChange:n.valueChanged.bind(n,t,i,r.name)})),l.default.createElement("td",null,l.default.createElement(a.Space,{size:"middle"},l.default.createElement("div",null,""+(void 0!==r.Unit?r.Unit:"")),l.default.createElement("div",{style:{color:"orangered"}},r.minimum&&r.maximum?r.minimum+"~"+r.maximum:""))));case y:return l.default.createElement("tr",{key:u},l.default.createElement("td",{style:{textAlign:"right"}},r.displayName+":"),l.default.createElement("td",{colSpan:2,style:{padding:3}},l.default.createElement(a.Select,{defaultValue:e[""+r.name],style:{width:"90%"},onChange:n.selectionChanged.bind(n,t,i,r.name)},r.values.map((function(e,t){var n=Math.trunc(16777216*Math.random()).toString();return l.default.createElement(a.Select.Option,{key:n,value:e},r.displayValues[t])})))));default:return null}}))},n.render=function(){var e=this,t=this.props.displayName;return l.default.createElement(a.Form.Item,{label:t+" :"},this.itemsCache.map((function(n,r){var i=Math.trunc(16777216*Math.random()).toString();return l.default.createElement("table",{key:i,style:{border:"1px solid #ccc",marginBottom:"5px",width:"100%"}},l.default.createElement("thead",null,l.default.createElement("tr",null,l.default.createElement("th",null),l.default.createElement("th",null),l.default.createElement("th",null))),l.default.createElement("tbody",null,l.default.createElement("tr",{key:n.name},l.default.createElement("td",{colSpan:2,style:{color:"red",textAlign:"center"}},t+":"+(r+1)),l.default.createElement("td",{style:{textAlign:"right"}},l.default.createElement(a.Button,{style:{color:"red",margin:"3px"},onClick:e.deleteClick.bind(e,r)},"删除"))),e.renderList(n,r)))})),l.default.createElement(a.Button,{style:{margin:"5px",color:"blue"},onClick:this.addClick.bind(this)},"添加"),l.default.createElement(a.Button,{style:{margin:"5px"},onClick:this.saveClick.bind(this)},"保存"))},t}(t.Component);N.propTypes={name:i.default.string,displayName:i.default.string,template:i.default.any,items:i.default.array,OnListChanged:i.default.func};var k=a.Collapse.Panel,I=function(e){function t(t){var a;d(p(a=e.call(this,t)||this),"index",0),d(p(a),"OnSetPropertyList",void 0),d(p(a),"OnParamsChanged",void 0),d(p(a),"layout",{labelCol:{span:6},wrapperCol:{span:12}}),d(p(a),"onPropertyChanged",(function(e,t){var n=a.state.properties,r=null==n?void 0:n.find((function(t){return t.name===e}));if(void 0!==r)if(null!==r.template&&r.template.length>0){var l=JSON.parse(JSON.stringify(r.parameters));r.parameters=t,a.OnParamsChanged(n,e,l,t)}else{var i=r.value;r.value=t,a.OnParamsChanged(n,e,i,t)}})),d(p(a),"groupBy",(function(e,t){var a={};return e.forEach((function(e){var n=JSON.stringify(t(e));a[n]=a[n]||[],a[n].push(e)})),Object.keys(a).map((function(e){return{name:JSON.parse(e),data:a[e]}}))})),d(p(a),"onFinish",(function(){}));var n=a.props,r=n.params,l=n.OnSetPropertyList,i=n.OnParamsChanged;return a.state={properties:r},a.OnSetPropertyList=l,a.OnParamsChanged=i,a}m(t,e),t.getDerivedStateFromProps=function(e,t){var a=e.params;return JSON.stringify(a)!==JSON.stringify(t.properties)?{properties:a}:null};var n=t.prototype;return n.onSetPropertyList=function(){var e=this.state.properties;this.OnSetPropertyList(e)},n.renderGroup=function(){var e=this,t=this.state.properties;if(t){var n=this.groupBy(t,(function(e){return e.category})).map((function(t,n){return l.default.createElement(k,{header:t.name,key:n+1},l.default.createElement(a.Form,s({},e.layout,{className:"ant-form-horizontal"}),e.renderList(t.data)))}));return l.default.createElement(a.Collapse,{defaultActiveKey:["1","2"]},n)}return l.default.createElement(l.default.Fragment,null)},n.renderList=function(e){var t=this;return e.map((function(e){var a=c;switch(null===e.template||0===e.template.length?null!==e.values&&e.values.length>0?(a=y,5!==e.type&&"bool"!==e.type||(a=g)):(1!==e.type&&2!==e.type&&"float"!==e.type&&"double"!==e.type||(a=h),3!==e.type&&4!==e.type&&"int"!==e.type||(a=f)):a=v,a){case c:return l.default.createElement(C,{key:e.name,name:e.name,displayName:e.displayName,description:e.description,text:""+e.value,OnTextChanged:t.onPropertyChanged});case f:return l.default.createElement(E,{key:e.name,name:e.name,displayName:e.displayName,description:e.description,value:e.value,OnValueChanged:t.onPropertyChanged,min:e.minimum,max:e.maximum,unit:e.unit||e.Unit,isInteger:!0});case h:return l.default.createElement(E,{key:e.name,name:e.name,displayName:e.displayName,description:e.description,value:e.value,OnValueChanged:t.onPropertyChanged,min:e.minimum,max:e.maximum,unit:e.unit||e.Unit,isInteger:!1});case y:return l.default.createElement(O,{key:e.name,name:e.name,displayName:e.displayName,description:e.description,items:e.values,displayStrs:e.displayValues,selectedItem:e.value,OnSelectionChanged:t.onPropertyChanged});case g:return l.default.createElement(x,{key:e.name,name:e.name,displayName:e.displayName,description:e.description,items:e.values,displayStrs:e.displayValues,bool:e.value,OnBoolChanged:t.onPropertyChanged});case v:return l.default.createElement(N,{key:e.name,name:e.name,displayName:e.displayName,template:e.template,items:e.parameters,OnListChanged:t.onPropertyChanged});default:return null}}))},n.render=function(){return l.default.createElement("div",{style:{width:"100%",height:"100%"}},l.default.createElement("div",{style:{padding:2,width:"100%",height:"100%",overflow:"auto"}},this.renderGroup()))},t}(t.Component);I.defaultProps={params:null,OnSetPropertyList:function(){}},I.propTypes={params:i.default.array,OnSetPropertyList:i.default.func,OnParamsChanged:i.default.func.isRequired},e.AnotherButton=function(e){return l.default.createElement(a.Button,{className:o},e.name)},e.PropertyList=I,e.default=function(e){return l.default.createElement("button",{style:{color:"red"},className:"btn-style"},e.name)},Object.defineProperty(e,"__esModule",{value:!0})}));
